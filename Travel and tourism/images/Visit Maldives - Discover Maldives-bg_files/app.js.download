(()=>{var e;e=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(){var t=e.apply(this,arguments);return this.setRequestHeader("X-CSRF-Token",Laravel.csrfToken),t},window.toggleLoading=function(e,t){if(e.hasClass("fa"))t?e.addClass("loading"):e.removeClass("loading");else if(t){e.children("i").hide(),e.prepend('<i class="fa fa-spinner bd-mr-2 fa-spin fa-pulse loading"> ')}else e.children(".loading").remove(),e.children("i").show()},window.generateSingleLocationMap=function(e,t){var a={center:new google.maps.LatLng(t.lat,t.lng),zoom:t.zoom||10,mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:!1,disableDefaultUI:!0,draggable:!1},i=new google.maps.Map(e,a),n=new google.maps.LatLng(t.lat,t.lng),r={url:t.marker,size:new google.maps.Size(32,48),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,48)};new google.maps.Marker({animation:google.maps.Animation.DROP,position:n,icon:r,shape:{coords:[14,43,20,33,24,25,28,17,28,0,0,0,0,17,4,25,8,33],type:"poly"},map:i,draggable:!1})},window.getParameterByName=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),i=a.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},$(window).on("load resize",(function(){var e=$(".navbar #main-links .dropdown"),t=$(".dropdown-toggle"),a=$(".dropdown-menu"),i="show";this.matchMedia("(min-width: 992px)").matches?e.hover((function(){var e=$(this);e.addClass(i),e.find(t).attr("aria-expanded","true"),e.find(a).addClass(i)}),(function(){var e=$(this);e.removeClass(i),e.find(t).attr("aria-expanded","false"),e.find(a).removeClass(i)})):e.off("mouseenter mouseleave")})),$(document).ready((function(){if(moment.locale(document.documentElement.lang),ScrollPosStyler.init({classAbove:"navbar-dark",classBelow:"navbar-light"}),$('[data-toggle="offcanvas"]').on("click",(function(){$(".offcanvas-collapse").toggleClass("open");var e=$(".offcanvas-collapse").hasClass("open");$(".navbar-toggler").attr("aria-expanded",e?"true":"false"),e?$("#main-navbar").addClass("offcanvas-open"):$("#main-navbar").removeClass("offcanvas-open")})),$("[data-toggle-display]").on("click",(function(){var e=$($(this).data("toggle-display"));e.length&&(e.fadeIn(),$(this).hide())})),$(".scrollbar-inner")[0]&&$(".scrollbar-inner").scrollbar({ignoreOverlay:!0,ignoreMobile:!0}),$("[data-timestamp]")[0]&&$("[data-timestamp]").each((function(){var e=$(this).data("time-zone"),t=$(this).data("timestamp"),a=moment.unix(t).tz(e),i=$(this);setInterval((function(){a.add(1,"s"),i.find(".time__min").text(a.format("mm")),i.find(".time__hours").text(a.format("h")),i.find(".time__sec").text(a.format("ss")),i.find(".time__ampm").text(a.format("A")),i.find(".date__day").text(a.format("D")),i.find(".date__month").text(a.format("MMM")),i.find(".date__year").text(a.format("YY"))}),1e3)})),$(".grid").each((function(){var e=$(this).masonry({itemSelector:".grid-item",columnWidth:".grid-sizer",percentPosition:!0,gutter:30});e.imagesLoaded().progress((function(){e.masonry("layout")}))})),$("[data-map]").each((function(){var e=$(this).data("map");generateSingleLocationMap(this,e)})),$(".lightbox")[0]&&$(".lightbox").lightGallery({enableTouch:!0}),$("[data-gallery]").on("click",(function(e){e.preventDefault();var t=$(this).data("gallery"),a=$($(this).data("gallery-carousel")),i=0;if(a.length){var n=a.find(".carousel-indicators > .active > [data-slide-to]").first();n.length&&(i=parseInt(n.data("slide-to"),10))}if($(this).data("lightGallery")){var r=$(this).lightGallery(),l=this;r.one("onAfterOpen.lg",(function(e){$(l).data("lightGallery").slide(i),$(l).trigger("onBeforeSlide.lg",[Math.max(i-1,0),i,!1,!1])}))}else $(this).lightGallery({dynamic:!0,share:!1,index:i,dynamicEl:t})})),$(".lightbox-viewer").each((function(){var e=$(this).find(".lightbox-btn"),t=$(this).find(".lightbox-item:first-child");e.on("click",(function(e){e.preventDefault(),t.trigger("click")}))})),$("[data-read-alerts]").click((function(e){e.preventDefault();var t=$(this).data("url"),a=$(this).data("read-alerts")||[],i=$(this).data("method")||"PATCH",n=this;$.ajax({url:t,type:i,data:{alerts:a,action:"read"},beforeSend:function(){},complete:function(){},success:function(e){$(n).closest("#alerts-display").fadeOut(),$(".btn-alerts").show()},error:function(e){422==e.status?showValidationErrorMsg(e):swal(__("Error!"),__("An error occurred while performing the action."),"error")}})})),$("[data-plan]").click((function(e){e.preventDefault();var t=$(this).data("plan");if("undefined"!=typeof Storage){var a=JSON.parse(localStorage.getItem("visitmaldives-planner-list"))||[],i=!0;$.each(a,(function(e,n){n&&n.permalink===t.permalink&&(i=!1,swal({title:__("Remove From Trip Planner?"),text:__("This article will be removed from your trip planner"),type:"warning",showCancelButton:!0,confirmButtonText:__("Yes, remove it!"),cancelButtonText:__("Cancel")}).then((function(e){e.value&&(a=a.filter((function(e){return e&&e.permalink!==t.permalink})),localStorage.setItem("visitmaldives-planner-list",JSON.stringify(a)),$("[data-plan]").html(__("Add to Trip")+' <i class="circle-icon fa fa-heart bd-ml-2" aria-hidden="true"></i>'))})))})),i&&a.push(t),localStorage.setItem("visitmaldives-planner-list",JSON.stringify(a));var n=__("Added")+' <i class="circle-icon fa fa-check bd-ml-2" aria-hidden="true"></i>';$(this).html(n)}else swal(__("Error!"),__("Your browser doesnt support this feature"),"error")})),$(".show-planner").click((function(e){e.preventDefault();var t='<div id="#trip-planner-dialog" class="p-3"><h1 class="h3 font-weight-bolder text-uppercase text-accent pb-3 border-bottom"><i class="circle-icon fa fa-heart bd-ml-2 bd-mr-4"></i> '+__("Trip Planner")+" </h1>",a=JSON.parse(localStorage.getItem("visitmaldives-planner-list")),i="",n="",r="";a&&a.length>0?(t+='<p class="pl-4 text-black-50">'+__("Here is a list of activities you have planned to do.")+'</p><ol id="trip-planner-list">',$.each(a,(function(e,a){a&&(t+='<li class="mb-" data-list-item-index='+e+'><a href="#" class="delete-planner-item float-right" data-index="'+e+'"><i class="fal fa-times text-muted"></i></a>',navigator.share&&(t+='<div href="#" class="float-right native-share-btn" data-share-url="'+a.permalink+'" data-share-text="'+a.description+'" data-share-title="'+a.title+'" data-index="\' + index + \'" onclick="nativeShare(\''+a.title+"','"+a.description+"','"+a.permalink+'\')"><i class="fal fa-share-alt text-muted px-3"></i></div>'),t+='<h2 class="h5 text-primary text-uppercase font-weight-bold mb-0"><a href="'+a.permalink+'">'+a.title+'</a></h2><p class="small text-black-50 pr-5">'+a.description+"</p></li>",i+=a.title+"%0D%0A"+a.description+"%0D%0A"+a.permalink+"%0D%0A %0D%0A",n+=a.title+"\n"+a.description+"\n"+a.permalink+"\n\n",r+='<input type="hidden" name="items['+e+'][model_type]" value="'+a.type+'">',r+='<input type="hidden" name="items['+e+'][model_id]" value="'+a.id+'">')})),t+="</ol>",t+='</div><div class="modal-footer" id="trip-planner-footer">',t+='<form action="'+window.Laravel.plannerUrl+'" target="_blank" method="post">'+r+'<input type="hidden" name="_token" value="'+window.Laravel.csrfToken+'">',t+='<button class="btn btn-link" type="submit" name="action" value="download" title="Dowload"><i class="fal fa-lg fa-download"></i></button>',t+='<button class="btn btn-link"  type="submit" name="action" value="print" title="Print"><i class="fal fa-lg fa-print"></i></button></form>',t+='<a class="btn btn-link"  href="mailto:?body='+i+'" title="Email"><i class="fal fa-lg fa-envelope"></i></a>',navigator.share&&(t+='<button class="btn btn-link native-share-btn" data-share-text="'+n+'" title="Share"><i class="fal fa-lg fa-share-alt"></i></button>'),t+='<button id="copy-btn" class="btn btn-link planner-copy-btn" data-clipboard-text="'+n+'" href="#" title="Copy"><i class="fal fa-lg fa-copy"></i></button>',t+="</div>"):t+='<p class="pl-4 text-black-50">'+__("You havent added any items to the Planner yet.")+"</p>",bootbox.dialog({title:null,message:t,size:"large",onEscape:!0,backdrop:!0}).init((function(){$(".delete-planner-item").click((function(e){e.preventDefault();var t=$(this).data("index"),a=JSON.parse(localStorage.getItem("visitmaldives-planner-list"));delete a[t],a=a.filter((function(e){return null!==e})),localStorage.setItem("visitmaldives-planner-list",JSON.stringify(a)),$("[data-list-item-index="+t+"]").slideUp()})),new ClipboardJS(".planner-copy-btn",{container:document.getElementById("copy-btn")}).on("success",(function(e){var t,a;t=e.trigger,a="Copied!",$(t).tooltip("hide").attr("data-original-title",a).tooltip("show"),function(e){setTimeout((function(){$(e).tooltip("hide")}),1e3)}(e.trigger)})),$(".native-share-btn").click((function(){var e=$(this).data("share-title"),t=$(this).data("share-text"),a=$(this).data("share-url");navigator.share&&navigator.share({title:e,text:t,url:a}).then((function(){}))}))}))})),"undefined"!=typeof Storage){var e=JSON.parse(localStorage.getItem("visitmaldives-planner-list"))||[];if($("[data-plan]").data("plan")){var t=$("[data-plan]").data("plan").permalink;$.each(e,(function(e,a){a&&a.permalink===t&&$("[data-plan]").html(__("Added")+' <i class="circle-icon fa fa-check bd-ml-2" aria-hidden="true"></i>')}))}}$(".auto-filters input[type=checkbox], .auto-filters input[type=radio], .auto-filters select").on("change",(function(e){var t=$(this).closest("form");t.length&&t.submit()})),$("#subscribe-submit").click((function(e){e.preventDefault();var t=$(this);if($(this).closest("form")[0].checkValidity()){var a=$("#subscribe-email").val(),i=$("#subscribe-name").val(),n=document.documentElement.lang;$.ajax("/"+n+"/newsletter",{method:"POST",data:{email:a,name:i},beforeSend:function(){toggleLoading(t,!0),$(".newsletter-form").find(".error-msg").remove(),$(".newsletter-form").find(".success-msg").remove()},complete:function(){toggleLoading(t,!1)},error:function(e){var t=e.responseJSON.errors;$.map(t,(function(e){e=$("<div />").text(e).html(),$(".newsletter-form").append('<div class="alert alert-danger error-msg text-center mt-3" role="alert">'+e+"</div>")}))},success:function(e){if((e=JSON.parse(e)).error){var t=$("<div />").text(e.error).html();$(".newsletter-form").append('<div class="alert alert-danger error-msg text-center mt-3" role="alert">'+t+"</div>")}else{var a=$("<div />").text(e.success).html();$(".newsletter-form").append('<div class="alert alert-success success-msg text-center mt-3" role="alert">'+a+"</div>"),$("#subscribe-email").val(""),$("#subscribe-name").val("")}}})}else $(this).closest("form")[0].reportValidity()})),$("[data-scroll-to]")[0]&&$("[data-scroll-to]").each((function(){$(this).scrollTo($(this).data("scroll-to"))}))})),$.fn.select2.defaults.set("theme","bootstrap4"),window.addEventListener("load",(function(e){if("serviceWorker"in navigator){try{navigator.serviceWorker.register("/service-worker.js")}catch(e){alert("ServiceWorker registration failed.")}navigator.serviceWorker.ready.then((function(e){e.update()}))}}))})();